<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1" /> 
    <meta name="author" content="Valencia">
    <meta name="description" content="[ Everything has a root. U are the left, I am right.]">
    
    <meta property="og:title" content="Blog" />
<meta property="og:description" content="[ Everything has a root. U are the left, I am right.]" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://astr0mfly.github.io/blog/" />

<meta property="og:updated_time" content="2018-09-13T22:31:21&#43;08:00"/>


    <title>
        
             Blog | Valencia 
        
    </title>

    <link rel="canonical" href="https://astr0mfly.github.io/blog/">

    
    

    
    <link href="https://astr0mfly.github.io/css/vendors-extensions/fontawesome/all.min.css" rel="stylesheet">
    
    <link href="https://astr0mfly.github.io/css/font_icon_head/iconfont.css" rel="stylesheet">


    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:300,400,500,600">
    <link href="https://astr0mfly.github.io/css/font.css" rel="stylesheet">

    
    <link href="https://astr0mfly.github.io/css/vendors/bootstrap4/bootstrap.min.css" rel="stylesheet">
    <link href="https://astr0mfly.github.io/css/vendors-extensions/mdb/mdb.min.css" rel="stylesheet">
    <link href="https://astr0mfly.github.io/css/vendors/mdb/style.min.css" rel="stylesheet">
    <link href="https://astr0mfly.github.io/css/main.css" rel="stylesheet">


    
    <link rel="shortcut icon"
     
        href="https://astr0mfly.github.io/img/head-valens.png"
    
    >

    
    
        <link href="https://astr0mfly.github.io/blog/index.xml" rel="alternate" type="application/rss+xml" title="Valencia" />
    

    <style type="text/css">
        @media (min-width: 800px) and (max-width: 850px) {
            .navbar:not(.top-nav-collapse) {
                background: #1C2331!important;
            }
        }
    </style>


    
    
        <link rel="stylesheet" href="https://astr0mfly.github.io/js/vendors/katex/katex.min.css">
    
    

    
    
        <link rel="stylesheet" href="https://astr0mfly.github.io/css/vendors/highlight/github-gist.css">
    

</head>
  <body class="bg-light" data-spy="scroll" data-target="#page-scrollspy" data-offset="90">
  
    
    

    
      


<nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar">
    <div class="container">

      
      <a class="navbar-brand" href="https://astr0mfly.github.io">
          
        <img class="avatar" src="https://astr0mfly.github.io/img/head-valens.png" style="width: 40px!important;height: auto;"  class="d-inline-block align-top" alt="" >
        
        <strong> Valencia</strong>
      </a>

      
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      
      <div class="collapse navbar-collapse" id="navbarSupportedContent">

        
        <ul class="navbar-nav mr-auto ">
          <li class="nav-item ">
            <a class="nav-link" href="https://astr0mfly.github.io">Home</a>
          </li>
             
            <li class="nav-item ">
              <a class="nav-link" href="https://astr0mfly.github.io/blog/" >Blog  </a>
            </li>
          
             
            <li class="nav-item ">
              <a class="nav-link" href="https://astr0mfly.github.io/moment/" >Moment  </a>
            </li>
          
             
            <li class="nav-item ">
              <a class="nav-link" href="https://astr0mfly.github.io/pocket/" >Pocket  </a>
            </li>
          
             
            <li class="nav-item ">
              <a class="nav-link" href="https://astr0mfly.github.io/about/" >About  </a>
            </li>
          
          
        </ul>

      </div>

    </div>
  </nav>
  
 
      


 



<div id="site-header" class="carousel slide carousel-fade" data-ride="carousel" style="height: 18rem;" >
    

    
    
    

    
    <div class="carousel-inner" role="listbox">
        
          

        
        <div class="carousel-item active">
            <div class="view" style="background-image: url('https://astr0mfly.github.io/img/header-slides/1a08978053aba70979f3962bb70524e8.jpg'); background-repeat: no-repeat; background-size: cover;">

              
              <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

                
                
                

              </div>
              

            </div>
        </div>
        
        
      
          

          
          <div class="carousel-item">
            <div class="view" style="background-image: url('https://astr0mfly.github.io/img/header-slides//4346dc57c0dd7af3b29bdc20f780e434.jpg'); background-repeat: no-repeat; background-size: cover;">

              
              <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

              </div>
              

            </div>
          </div>
          
        
      
          

          
          <div class="carousel-item">
            <div class="view" style="background-image: url('https://astr0mfly.github.io/img/header-slides//821b8cf31b75431716674da4ddf3d895.jpg'); background-repeat: no-repeat; background-size: cover;">

              
              <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

              </div>
              

            </div>
          </div>
          
        
      
          

          
          <div class="carousel-item">
            <div class="view" style="background-image: url('https://astr0mfly.github.io/img/header-slides//a1b2a3c18fd7b64d5b425dac2c73c31f.jpeg'); background-repeat: no-repeat; background-size: cover;">

              
              <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

              </div>
              

            </div>
          </div>
          
        
      
          

          
          <div class="carousel-item">
            <div class="view" style="background-image: url('https://astr0mfly.github.io/img/header-slides//bf08d7884fb4a02e1fe952101975a376.jpeg'); background-repeat: no-repeat; background-size: cover;">

              
              <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

              </div>
              

            </div>
          </div>
          
        
      


    </div>
    

    
    <div class="carousel-content text-center white-text wow fadeIn">
        <div class="row mx-0 headfont mt-3 pt-4">
            
            <div class="col-12 col-sm-5 align-middle">
                <a href="https://astr0mfly.github.io">
                  
                    <img class="pull-right avatar avatar-md" src="https://astr0mfly.github.io/img/timg.jpeg" alt="" >
                  
                </a>
            </div>

            <div class="col-12 col-sm-7 text-left pl-2">
                <a href="https://astr0mfly.github.io">
                    <h1 class="mb-2 h1" style="font-weight: 300;" >
                        <strong>Valencia</strong>
                    </h1>
                </a>


                
                <div class="mt-2" style="font-size: 1rem; color: white;">
                    
                      <a href="//github.com/astr0mfly" target="_blank" rel="noopener"><i class="fab fa-github pr-1" aria-hidden="true"></i></a>
                    
                    
                    
                    
                    
                    
                    
                    
                      <a href="//blog.csdn.net/u011138254" target="_blank" rel="noopener"><i class="iconfont icon-CN_csdnnet" aria-hidden="true"></i></a>
                    
                    
                      <a href="//www.zhihu.com/people/peng-mo-wei" target="_blank" rel="noopener"><i class="iconfont icon-zhihu" aria-hidden="true"></i></a>
                    
                    
                      <a href="mailto:pengwanring@live.com"><i class="far fa-envelope-open pr-1" aria-hidden="true"></i></a>
                    
                    
                      <a href="https://astr0mfly.github.io/blog/index.xml"><i class="fas fa-rss pr-1" aria-hidden="true"></i></a>
                    
                </div>
            </div>
        </div>
    </div>
    

    
    
    

</div>
  
    

    
  <main class="post-main-wrapper px-5">
    
    <div class="row">

      
      
        
        <div class="col-md-3">
          

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  





  <hr>
  
    <div class="post-meta">
      <div class="mb-2">
        <a href="https://astr0mfly.github.io/categories/">
          <span class="font-weight-bold text-uppercase post-meta">
            <i class="fas fa-folder-open pr-1" aria-hidden="true"></i> 
            Categories
          </span>
        </a>
      </div>

      <div class="li-x post-meta" style="margin-left: -8px;">
        
          
          
            
            <li class="py-1">
              <a href="https://astr0mfly.github.io/categories/%E7%BC%96%E7%A0%81%E4%BA%BA%E7%94%9F">
                <span>编码人生 (11)</span>
              </a>
            </li>           
          
            
              <li class="middot"></li>
            
            <li class="py-1">
              <a href="https://astr0mfly.github.io/categories/%E7%BC%96%E7%A0%81%E4%B9%8B%E9%81%93">
                <span>编码之道 (4)</span>
              </a>
            </li>           
          
        
      </div>
    </div>

    
  

    
          

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  





  <hr>
  
    <div class="post-meta">
      <div class="mb-2">
        <a href="https://astr0mfly.github.io/tags/">
          <span class="font-weight-bold text-uppercase post-meta">
            <i class="fas fa-tags pr-1" aria-hidden="true"></i> 
            Featured Tags
          </span>
        </a>
      </div>

      <div class="li-x post-meta tags-md" style="margin-left: -8px;">
        
        
        
            <li><a href="https://astr0mfly.github.io/tags/go" role="button"><span>go (5)</span></a></li>
          
        
            <li><a href="https://astr0mfly.github.io/tags/cpp" role="button"><span>cpp (4)</span></a></li>
          
        
            <li><a href="https://astr0mfly.github.io/tags/distributed" role="button"><span>distributed (4)</span></a></li>
          
        
            <li><a href="https://astr0mfly.github.io/tags/mysql" role="button"><span>mysql (2)</span></a></li>
          
        
            <li><a href="https://astr0mfly.github.io/tags/blog" role="button"><span>blog (1)</span></a></li>
          
        
            <li><a href="https://astr0mfly.github.io/tags/git" role="button"><span>git (1)</span></a></li>
          
        
            <li><a href="https://astr0mfly.github.io/tags/golang" role="button"><span>golang (1)</span></a></li>
          
        
            <li><a href="https://astr0mfly.github.io/tags/hugo" role="button"><span>hugo (1)</span></a></li>
          
        
            <li><a href="https://astr0mfly.github.io/tags/web" role="button"><span>web (1)</span></a></li>
          
        
      </div>
    </div>

    
  

          
  

  

  

  

  

  

  







  <hr>
  
    <div class="post-meta">
      <div class="mb-2">
        <a href="https://astr0mfly.github.io/series/">
          <span class="font-weight-bold text-uppercase post-meta">
            <i class="fas fa-bookmark pr-1" aria-hidden="true"></i> 
            Recommend Series
          </span>
        </a>
      </div>
     
      <div class="post-meta" >
        
          
          
            <li class="py-1"><a href="https://astr0mfly.github.io/series/golang"><span>Golang (4)</span></a></li>
          
            <li class="py-1"><a href="https://astr0mfly.github.io/series/database"><span>Database (1)</span></a></li>
          
            <li class="py-1"><a href="https://astr0mfly.github.io/series/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E4%B9%8B%E8%B7%AF"><span>个人博客搭建之路 (1)</span></a></li>
          
        
      </div>
    
      
    </div>
  

  
        </div>
        

        
        
        <div class="col-md-9 mt-3">  
      
          <ul>
            <div class="div-x">
              <div class='post-heading'>
  
      Blog
  
</div>

              
              
                <div class="px-2 middot"></div>
                <div>
                  18 posts
                </div>
              
            </div>

            
              <div class="post-content markdown">
                <p>这里是我的笔记印象流&hellip;</p>

              </div>
            
        </ul>
        <div>
          <div class="pagination pagination-outline justify-content-end active-color">
            
            

<ul class="pagination">
    
    <li class="page-item">
        <a href="https://astr0mfly.github.io/blog/" class="page-link" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
    </li>
    
    <li class="page-item">
    <a href="https://astr0mfly.github.io/blog/page/3/" class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
    </li>
    
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="https://astr0mfly.github.io/blog/">1</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="https://astr0mfly.github.io/blog/page/2/">2</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="https://astr0mfly.github.io/blog/page/3/">3</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item active"><a class="page-link" href="https://astr0mfly.github.io/blog/page/4/">4</a></li>
    
    
    <li class="page-item disabled">
    <a href="" class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
    </li>
    
    <li class="page-item">
        <a href="https://astr0mfly.github.io/blog/page/4/" class="page-link" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
    </li>
    
</ul>

          </div>

          
              <div class="post-wrapper white-bg post-card">
  
  <a href="https://astr0mfly.github.io/blog/2019-04/%E4%BD%BF%E7%94%A8hugo%E5%88%B6%E4%BD%9C%E9%9D%99%E6%80%81%E4%B8%AA%E4%BA%BA%E7%95%8C%E9%9D%A2/">
    <div class="post-header text-center">
      <div class="px-4 post-heading">使用hugo制作静态个人界面</div>
      <ul class="post-meta li-x mt-1">
        
          <li>Apr 22, 2019</li>
        
    
        
          <li class="middot"></li>
          <li>7 minutes read</li>
        
      </ul>
    </div>
    

    
      安装hugo 建议到如下链接下载对应文件，使用go get挺慢的。 https://github.com/gohugoio/hugo/releases 安装hugo 生成site并且 clone 对应皮肤的Git到theme文件夹下 调试 ：hugo server --theme=hyde --buildDrafts 打开 : http://localhost:1313 实时调试 生成部署： hugo --theme=hyde 上传到git ： git push -u origin master 实例皮肤：redlougue hugo链接： https://github.com/tmaiaroto/hugo-redlounge 路径解释 config.toml 站点全局的参数配置文件 archetypes Hugo的markdown文件中前置数据Front Matter定义的结构，默认使用的是default.md文件，可以自......
    
  </a>

  
  
  <div class="post-meta li-x mt-2 div-x">
    <div>
      
        
          <li><a href="https://astr0mfly.github.io/categories/%E7%BC%96%E7%A0%81%E4%BA%BA%E7%94%9F"><i class="fas fa-folder-open pr-1" aria-hidden="true"></i> 编码人生 </a></li>
        
      
      
        
          <li><a href="https://astr0mfly.github.io/series/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E4%B9%8B%E8%B7%AF"><i class="fas fa-bookmark pr-1" aria-hidden="true"></i>个人博客搭建之路</a></li>
        
      
    </div>
   
    <div>
      
        
<div class="li-x div-x post-meta">
  <li class="pr-0"><a href="https://astr0mfly.github.io/tags/"><i class="fas fa-tags"></i></a></li>
  <div class="tags-sm">
    
      <li><a href="https://astr0mfly.github.io/tags/hugo" role="button">hugo </a></li>
      
    
      <li><a href="https://astr0mfly.github.io/tags/go" role="button">go </a></li>
      
    
      <li><a href="https://astr0mfly.github.io/tags/web" role="button">web </a></li>
      
    
      <li><a href="https://astr0mfly.github.io/tags/blog" role="button">blog </a></li>
      
    
  </div>
</div>
      
    </div>
  </div>

</div>

          
              <div class="post-wrapper white-bg post-card">
  
  <a href="https://astr0mfly.github.io/blog/1-01/">
    <div class="post-header text-center">
      <div class="px-4 post-heading"></div>
      <ul class="post-meta li-x mt-1">
        
          <li>Jan 1, 0001</li>
        
    
        
          <li class="middot"></li>
          <li>3 minutes read</li>
        
      </ul>
    </div>
    

    
      series: []  .task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }   body { font-family: -apple-system, BlinkMacSystemFont, &#39;Segoe WPC&#39;, &#39;Segoe UI&#39;, &#39;Ubuntu&#39;, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; line-height: 1.6; }      date: &#34;2019-04-29T02:47:43-07:00&#34; draft: false title: &#34;Tcp-Reaction&#34; tags: [cpp] #series: [] categories: [编码之道] toc: true TCP通信基本流程 Windows 和 Linux 上常用的 socket API 函数并不多，除了特定操作系统提供的一些基于自身系统特性的 API， 大多数 Socket API 都源于BSD Socket （即伯克利套接字（Berkeley Sockets）），因此这些 socket 函数在不同的平台有着相似的签名和参数。
 linux 查看socket函数帮助  man bind、man man、man 3 sleep   windows 查看帮助  使用在线版本的 MSDN    理论剖析  服务端流程    调用 socket 函数创建 socket（侦听socket） 调用 bind 函数 将 socket绑定到某个ip和端口的二元组上 调用 listen 函数 开启侦听 当有客户端请求连接上来后，调用 accept 函数接受连接，产生一个新的 socket（客户端 socket） 基于新产生的 socket 调用 send 或 recv 函数开始与客户端进行数据交流 通信结束后，调用 close 函数关闭侦听 socket    客户端流程    调用 socket函数创建客户端 socket 调用 connect 函数尝试连接服务器 连接成功以后调用 send 或 recv 函数开始与服务器进行数据交流 通信结束后，调用 close 函数关闭侦听socket   上述流程交互总结如下： 代码实现 Server
#include &lt;sys/types.h&gt;  #include &lt;sys/socket.h&gt; #include &lt;arpa/inet.h&gt; #include &lt;unistd.h&gt; #include &lt;iostream&gt; #include &lt;string.h&gt; int main(int argc, char* argv[]) { //1.创建一个侦听socket int listenfd = socket(AF_INET, SOCK_STREAM, 0); if (listenfd == -1) { std::cout &lt;&lt; &#34;create listen socket error.&#34; &lt;&lt; std::endl; return -1; } //2.初始化服务器地址 struct sockaddr_in bindaddr; bindaddr.......
    
  </a>

  
  
  <div class="post-meta li-x mt-2 div-x">
    <div>
      
      
    </div>
   
    <div>
      
    </div>
  </div>

</div>

          
              <div class="post-wrapper white-bg post-card">
  
  <a href="https://astr0mfly.github.io/blog/1-01/">
    <div class="post-header text-center">
      <div class="px-4 post-heading"></div>
      <ul class="post-meta li-x mt-1">
        
          <li>Jan 1, 0001</li>
        
    
        
          <li class="middot"></li>
          <li>One minute read</li>
        
      </ul>
    </div>
    

    
        series: []  .task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }   body { font-family: -apple-system, BlinkMacSystemFont, &#39;Segoe WPC&#39;, &#39;Segoe UI&#39;, &#39;Ubuntu&#39;, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; line-height: 1.6; }      date: &#34;2019-04-29T06:42:08-07:00&#34; draft: true title: &#34;Distri-Design&#34; tags: [Distributed] #series: [] categories: [] toc: true 分布式系统设计 分布式系统设计主要有关于四个重点两个小点。
四个重点 容错能力（服务隔离、异步调用、请求幂等性、分布式锁） 何为容错能力： 系统在不健康、不顺，甚至出错的情况下有能力 hold 得住，挺得住，还有能在这种逆境下力挽狂澜的能力；我们都知道，故障是必然会发生的，是正常的，是常见的，我们应该把处理故障的代码当成正常的功能做在架构里写在代码里。
请求幂等：幂等并不是每次请求的结果都一样，而是一次和多次请求某一个资源应该具有同样的副作用，f(x) = f(f(x))，要做到幂等性的交易接口，需要有一个唯一的标识，来标志交易是同一笔交易，这个标识要能做到全局唯一。幂等还是比较容易实现的，比如对于转账交易（支付系统一定要保证幂等），最简单的就是每次请求都带有一个唯一标识id，比如一个请求（id,money），此id标识在数据库中能唯一确定一条记录；若因为网络故障客户端多次请求同一个转账交易（id,money），服务端必须保证只能有一次记录成功，对于其他重复请求应该给客户端明确的解析语义。我们一般保证幂等的判断是从数据库查询有没有相同id的记录，但是在分布式系统环境下，可能有问题，主从问题：两个相同的请求request1、request2时间间隔很短，request1请求过来的时候，查询从库发现没有对应记录，则request1开始操作插入主库record1，但是还没有同步到从库；此时request2查询从库（主从还未同步）也发现没有相同id的记录，准备插入有相同id的记录record2，这个时候request1成功插入record1，request2开始插入record2，数据库报错：唯一约束被破坏相关的异常日志；解决这个问题有两种方法：1、读写都强制走主库；2、采用分布式锁，考虑性能问题，一般都选2 分布式锁：分布式系统一般都有多台机器，常规的多线程锁已经无法解决问题；最简单用redis实现：思路很简单，主要用到的redis函数是setnx()。首先是将某一任务标识名UniqueKey（能唯一识别一个请求的标识）作为键存到redis里，并为其设个过期时间，如果是同样的请求过来，先是通过setnx()看看是否能将UniqueKey插入到redis里，可以的话就返回true，不可以就返回false。
 分布式锁设计原则： 互斥性，同一时间只有一个线程持有锁 容错性，即使某一个持有锁的线程，异常退出，其他线程仍可获得锁 隔离性，线程只能解自己的锁，不能解其他线程的锁
 服务隔离：是为了在系统发生故障时能限定传播范围和影响范围，即发生故障后不会出现滚雪球效应，从而保证只有出问题的服务不可用，其他服务还是可用的。
异步调用：发送方发送请求后，接收方直接返回正在处理，通过轮询或者回调的方式返回结果；异步调用相比于同步调用的最大好处是可以快速相应客户端的请求，至于具体的请求结果，通过异步回调的方式发送给客户端，这种方式在服务端平均处理请求时间过长的业务场景下很好用，避免在高请求流量下的超时、阻塞等问题；
可伸缩性（有 / 无状态的服务） 无状态服务在程序 Bug 上和水平扩展上有非常优秀的表现，但是在一致性上却有劣势，事物总是相对的（个人此点能力不足，不足以论述）
可伸缩性（有 / 无状态的服务） ACID :大家在买同一本书的过程中，每个用户的购买请求都需要把库存锁住，等减完库存后，把锁释放出来，后续的人才能进行购买。同一时间不可能有多个用户下单，订单流程需要有排队的情况，这样一来，我们就不可能做出性能比较高的系统来。
BASE :大家都可以同时下单，这个时候不需要去真正地分配库存，然后系统异步地处理订单，而且是批量的处理。因为下单的时候没有真正去扣减库存，所以，有可能会有超卖的情况。而后台的系统会异步地处理订单时，发现库存没有了，于是才会告诉用户你没有购买成功。
强一致性（ACID）和高可用性（BASE）是对立，顾此失彼；因此，为了可用性，我们要讲业务中需要强一致性的动作和不需要强一致性的动作剥离开，对于非强一致性需求的动作，可以做补偿事务；我们应尽量设计更多非强一致性的业务 由于网络等问题，一些请求无法确定是否成功，这个时候需要重试，即在此发送请求给服务端，希望服务端能确定的交易结果，重试一般通过定时任务扫表，将不是终态的记录查询出在此发请求。
应对大流量的能力（熔断、降级） 熔断（慎用）：如果系统中，某个目标服务调用慢或者有大量超时，此时，熔断该服务的调用，对于后续调用请求，不在继续调用目标服务，直接返回，快速释放资源。如果目标服务情况好转则恢复调用；熔断主要是应对流量引起的问题，弃卒保车，使服务处于关闭、半关闭状态，以保证部分业务成功，或者舍弃次要业务使主业务运行通畅；
限流：熔断的一种，半开状态，只允许少部分的请求，其他的都拒绝，如果设计得当，被拒绝的请求，客户端会通过重试、补偿操作来完成；
降级：暂时牺牲掉一些服务，保障整个系统的服务。比如：如果服务器已经高负载，这个时候可以将一些不重要的操作给关闭，比如重试操作，因为服务器已经承受不住，这个时候再重试也没有多大效果，反而更加重服务端的压力，这个时候可以设置一个开关，将重试功能关闭；
两个小点 解耦（MQ） 在软件工程中，对象之间的耦合度就是对象之间的依赖性。对象之间的耦合越高，维护成本越高，因此对象的设计应使模块之间的耦合度尽量小。在软件架构设计中，模块之间的解耦或者说松耦合有两种，假设有两个模块A、B，A依赖B：
第一种是，模块A和模块B只通过接口交互，只要接口设计不变，那么模块B内部细节的变化不影响模块A对模块B服务能力的消费。 面向接口设计下真正实现了将接口契约的定义和接口的实现彻底分离，实现变化不影响到接口契约，自然不影响到基于接口的交互。 模块A和B之间的松耦合，主要通过合理的模块划分、接口设计来完成。如果出现循环依赖，可以将模块A、B共同依赖的部分移除到另一个模块C中，将A、B之间的相互依赖，转换为A、B同时对C的依赖。
第二种是，将同步调用转换成异步消息交互。 比如在买机票系统中，机票支付完成后需要通知出票系统出票、代金券系统发券。如果使用同步调用，那么出票系统、代金券系统宕机是会影响到机票支付系统，如果另一个系统比如专车系统也想要在机票支付完成后向用户推荐专车服务，那么同步调用模式下机票支付系统就需要为此而改动，容易影响核心支付业务的可靠性。 如果我们将同步调用替换成异步消息，机票支付系统发送机票支付成功的消息到消息中间件，出票系统、代金券系统从消息中间件订阅消息。这样一来，出票系统、代金券系统的宕机也就不会对机票支付系统造成任何影响了。专车系统想要知道机票支付完成这一事件，也只需要从消息中间件订阅消息即可，机票支付系统完全不需要做任何改动。 异步消息解耦，适合那些信息流单向流动（类似发布-订阅这样的），实时性要求不高的系统。常见的开源消息队列框架有：Kafka、RabbitMQ、RocketMQ。
线程池 线程池：如果并发的线程数量很多，并且每个线程都是执行一个时间很短的任务就结束了，这样频繁创建线程就会大大降低系统的效率，因为频繁创建线程和销毁线程需要时间，且创建过多的线程会耗费系统资源，频繁的上下文切换也影响系统的性能。
实战分析 分析项目一：三个系统，A、B、C；A负责下单菜品:aaa，B负责接受A的下单请求，比根据A传递过来的aaa查询C得到菜品的详情，然后在继续下单；我们可以看出如果C系统挂了，整个下单流程就挂了，无法下单了；如何降级？B将C的菜品数据也存一份，正常情况下用C的菜品查询（C的菜品数据实时性更好一点），如果C挂了，B就用自己存的菜品，作为一种临时方案，达到可继续下单的目的，毕竟不能因为一个查询系统挂了导致整个下单功能不能用，这就是一种降级处理～
分析项目二：关闭重试机制；很多项目都有超时重试的机制，这种机制在服务已经负载过大、无法及时处理时，应当将重试逻辑关闭，避免因重试导致更严重的服务负担。
分析项目三：控制入口访问权限，白名单可用，当服务负载过大，可以通过在入口(比如拦截器中进行控制)控制流量，比如只允许vip客户访问，通过添加白名单方式来实现。
 高可用设计注意事项 分析项目一：缓存，不要放在业务侧，要在数据源头设置，业务方只负责增删改；否则可能造成多个业务方的数据不一致；
版本控制    Version Action Time     1.0 Init 2019-04-29T06:42:08-07:00     ......
    
  </a>

  
  
  <div class="post-meta li-x mt-2 div-x">
    <div>
      
      
    </div>
   
    <div>
      
    </div>
  </div>

</div>

          
            
        </div>
      </div>
      

    </div>
  </main>

    
    
<footer class="page-footer text-center font-small mt-4 wow fadeIn">


    
    <div class="pb-2 mt-5 pt-5" style= 'font-size: 16px;'>
        
            <a href="//github.com/astr0mfly" target="_blank" rel="noopener"><i class="fab fa-github mr-3" aria-hidden="true"></i></a>
        
        
        
        
        
        
        
        
            <a href="//blog.csdn.net/u011138254" target="_blank" rel="noopener"><i class="iconfont icon-CN_csdnnet" aria-hidden="true"></i></a>
        
        
            <a href="//www.zhihu.com/people/peng-mo-wei" target="_blank" rel="noopener"><i class="iconfont icon-zhihu" aria-hidden="true"></i></a>
        
        
            <a href="mailto:pengwanring@live.com"><i class="far fa-envelope-open mr-3" aria-hidden="true"></i></a>
        
        
            <a href="https://astr0mfly.github.io/blog/index.xml"><i class="fas fa-rss mr-3" aria-hidden="true"></i></a>
        
        

    </div>
    

    
    <div class="copyright py-4">
        
        <span>  2016 - 2019 &copy; | Theme <a href='https://github.com/orianna-zzo/AllinOne' target="_blank">AllinOne</a> by <a href='https://github.com/orianna-zzo' target="_blank">Orianna</a>  </span>
    </div>
    

</footer>

    




<script type="text/javascript" src="https://astr0mfly.github.io/js/vendors/jquery/jquery-3.3.1.min.js"></script>

<script type="text/javascript" src="https://astr0mfly.github.io/js/vendors/jquery/jquery.smooth-scroll.min.js"></script>



<script type="text/javascript" src="https://astr0mfly.github.io/js/vendors/popper.min.js"></script>
<script type="text/javascript" src="https://astr0mfly.github.io/js/vendors/holder.min.js"></script>
<script type="text/javascript" src="https://astr0mfly.github.io/js/vendors-extensions/bootstrap4/bootstrap.js"></script>

<script type="text/javascript" src="https://astr0mfly.github.io/js/vendors/mdb/mdb.min.js"></script>

<script type="text/javascript" src="https://astr0mfly.github.io/js/main.js"></script>




<script src="https://astr0mfly.github.io/js/vendors/highlight.pack.js">
</script>
<script>
    hljs.initHighlightingOnLoad();
</script>





<link rel="stylesheet" href="https://astr0mfly.github.io/js/vendors/katex/katex.min.css%20" />
<script defer src="https://astr0mfly.github.io/js/vendors/katex/katex.min.js"></script>
<script defer src="https://astr0mfly.github.io/js/vendors/katex/contrib/auto-render.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body);
    });
</script>








<script type="text/javascript">
    
    new WOW().init();
</script>
  </body>
</html>